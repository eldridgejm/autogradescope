<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>autogradescope &mdash; autogradescope  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#" class="icon icon-home">
            autogradescope
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">autogradescope</a></li>
<li><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#creating-a-new-autograder">Creating a new autograder</a></li>
<li><a class="reference internal" href="#writing-test-modules">Writing test modules</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#building">Building</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features">Features</a><ul>
<li><a class="reference internal" href="#timeouts">Timeouts</a></li>
<li><a class="reference internal" href="#leaderboards">Leaderboards</a></li>
<li><a class="reference internal" href="#including-doctests">Including doctests</a></li>
<li><a class="reference internal" href="#extra-credit">Extra credit</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api">API</a><ul>
<li><a class="reference internal" href="#module-0">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">autogradescope</span></code></a><ul>
<li><a class="reference internal" href="#autogradescope.Settings"><code class="docutils literal notranslate"><span class="pre">Settings</span></code></a><ul>
<li><a class="reference internal" href="#autogradescope.Settings.default_visibility"><code class="docutils literal notranslate"><span class="pre">Settings.default_visibility</span></code></a></li>
<li><a class="reference internal" href="#autogradescope.Settings.default_weight"><code class="docutils literal notranslate"><span class="pre">Settings.default_weight</span></code></a></li>
<li><a class="reference internal" href="#autogradescope.Settings.default_timeout"><code class="docutils literal notranslate"><span class="pre">Settings.default_timeout</span></code></a></li>
<li><a class="reference internal" href="#autogradescope.Settings.leaderboard"><code class="docutils literal notranslate"><span class="pre">Settings.leaderboard</span></code></a></li>
<li><a class="reference internal" href="#autogradescope.Settings.failure_message"><code class="docutils literal notranslate"><span class="pre">Settings.failure_message</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-autogradescope.decorators">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">autogradescope.decorators</span></code></a><ul>
<li><a class="reference internal" href="#autogradescope.decorators.timeout"><code class="docutils literal notranslate"><span class="pre">timeout()</span></code></a></li>
<li><a class="reference internal" href="#autogradescope.decorators.visibility"><code class="docutils literal notranslate"><span class="pre">visibility()</span></code></a></li>
<li><a class="reference internal" href="#autogradescope.decorators.weight"><code class="docutils literal notranslate"><span class="pre">weight()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-autogradescope.doctests">Module: <code class="xref py py-mod docutils literal notranslate"><span class="pre">autogradescope.doctests</span></code></a><ul>
<li><a class="reference internal" href="#autogradescope.doctests.run"><code class="docutils literal notranslate"><span class="pre">run()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">autogradescope</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">autogradescope</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="autogradescope">
<h1>autogradescope<a class="headerlink" href="#autogradescope" title="Link to this heading"></a></h1>
<p><cite>autogradescope</cite> is a Python package for creating <a class="reference external" href="https://www.gradescope.com">Gradescope</a> autograders with <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a>. Features include:</p>
<ul class="simple">
<li><p><strong>Convenience</strong>: write autograders in Python using <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a> (instead of <code class="docutils literal notranslate"><span class="pre">unittest</span></code>).</p></li>
<li><p><strong>Informative failure messages</strong>: provides students with detailed feedback on their code, including the source code of failing tests.</p></li>
<li><p><strong>Weigh tests</strong>: assign more points to important tests.</p></li>
<li><p><strong>Flexible visibility</strong>: show tests to students only after the deadline, or never.</p></li>
<li><p><strong>Timeouts</strong>: prevent infinite loops or infinite code from hanging the autograder.</p></li>
<li><p><strong>Leaderboards</strong>: make competitions that use Gradescope’s leaderboard feature.</p></li>
<li><p><strong>Extra credit</strong>: award points for additional tests.</p></li>
</ul>
</section>
<section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h1>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p><cite>autogradescope</cite> can be easily installed with <cite>pip</cite>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/eldridgejm/autogradescope
</pre></div>
</div>
<p>It is also packaged as a Nix flakes. To temporarily install it, run</p>
<div class="highlight-nix notranslate"><div class="highlight"><pre><span></span>nix shell <span class="l">github:eldridgejm/autogradescope</span>
</pre></div>
</div>
<p>You can see the source code on <a class="reference external" href="https://github.com/eldridgejm/autogradescope">GitHub</a>.</p>
</section>
<section id="creating-a-new-autograder">
<h2>Creating a new autograder<a class="headerlink" href="#creating-a-new-autograder" title="Link to this heading"></a></h2>
<p>To create a new autograder, run <code class="docutils literal notranslate"><span class="pre">autogradescope</span></code> and follow the
instructions. This will create a new directory, <code class="docutils literal notranslate"><span class="pre">autograder</span></code>, with a template
autograder. The layout of this directory is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.
├──<span class="w"> </span>data/
├──<span class="w"> </span>setup/
├──<span class="w"> </span>solution/
├──<span class="w"> </span>tests
│<span class="w">   </span>├──<span class="w"> </span>test_private.py
│<span class="w">   </span>└──<span class="w"> </span>test_public.py
├──<span class="w"> </span>Makefile
└──<span class="w"> </span>requirements.txt
</pre></div>
</div>
<p>Place your public and private tests in <code class="docutils literal notranslate"><span class="pre">tests/test_public.py</span></code> and
<code class="docutils literal notranslate"><span class="pre">tests/test_private.py</span></code> respectively; the next section describes the
structure of these files. Put your solution code in <code class="docutils literal notranslate"><span class="pre">solution/</span></code>, any data
files that the submission will need in <code class="docutils literal notranslate"><span class="pre">data/</span></code>, and any Python packages
needed to run the autograder (e.g., <cite>pandas</cite>, <cite>numpy</cite>) in <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>.</p>
</section>
<section id="writing-test-modules">
<h2>Writing test modules<a class="headerlink" href="#writing-test-modules" title="Link to this heading"></a></h2>
<p>Autograder tests are written as <cite>pytest</cite> unit tests. That is, each test should
be written as a Python function whose name starts with <code class="docutils literal notranslate"><span class="pre">test_</span></code> in a file
whose name starts with <code class="docutils literal notranslate"><span class="pre">test_</span></code> in the <code class="docutils literal notranslate"><span class="pre">test/</span></code> directory. A test function
should use <code class="docutils literal notranslate"><span class="pre">assert</span></code> to check that a particular outcome holds; if it does not,
the test fails and points are not awarded. Tests either award points
or do not; to award partial credit, you can use multiple tests.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Autograder tests are typically divided into two categories: public and private.
Public tests are always visible to students, while private tests are visible
only after the deadline (or are never visible). Reflecting this convention, the
template autograder generated by <code class="docutils literal notranslate"><span class="pre">autogradescope</span></code> includes two test
files, <code class="docutils literal notranslate"><span class="pre">tests/test_public.py</span></code> and <code class="docutils literal notranslate"><span class="pre">tests/test_private.py</span></code>. In principle,
<code class="docutils literal notranslate"><span class="pre">autogradescope</span></code> is flexible, and you do not need to use this structure; you
can have as many test files as you like, but it is recommended to keep public
and private tests separate.</p>
</div>
<p>The test file should import the student’s submission as a Python module and
then write test functions that call functions in the submission. You will want to
communicate to students that they should, for example, “write a function named <cite>doubler</cite>
in a fill named <cite>pp01.py</cite> that takes an integer and returns twice that integer.”
If the module cannot be imported (due to the student naming it incorrectly, or because
their code imports a module that is not available), the autograder will fail
and print a helpful error message.</p>
<p>If a test function includes a docstring, the docstring will be displayed to
students as the name of the test (provided that the test is visible to
students). It is therefore recommended that each test have an informative
docstring, such as “Checks efficiency of your code on a large input” or “Checks
that output is sorted”. If a test function does not include a docstring, the
function name will be displayed to students instead.</p>
<p>If a test that is visible to students fails, the test code will also be
displayed to students to show them precisely what went wrong. For this reason,
it is recommended to include comments in the test code to explain what the test
is checking for.</p>
<p>An example of a simple autograder test is shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_doubling_21</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Doubling 21 makes 42.&quot;&quot;&quot;</span>
    <span class="c1"># When we give your code 21, it should return 42.</span>
    <span class="k">assert</span> <span class="n">pp01</span><span class="o">.</span><span class="n">doubler</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span> <span class="o">==</span> <span class="mi">42</span>
</pre></div>
</div>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>Autograder tests require some configuration. For example, the visibility of the
tests to students needs to be specified, as is the (weight) of each test, a
timeout limiting the time a test can take before it fails, etc.</p>
<p>Defaults for every test in the file are set by creating an instance of
<a class="reference internal" href="#autogradescope.Settings" title="autogradescope.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">autogradescope.Settings</span></code></a> and storing it in the global variable
<code class="docutils literal notranslate"><span class="pre">SETTINGS</span></code>. For convenience, comments describing the available settings are
included in the starter test files generated by <code class="docutils literal notranslate"><span class="pre">autogradescope</span></code>.
To prevent errors, the test file <em>must</em> include a <code class="docutils literal notranslate"><span class="pre">SETTINGS</span></code> object; if it
does not, the autograder will not run.</p>
<p>Settings for individual tests can be set using the
<a class="reference internal" href="#autogradescope.decorators.weight" title="autogradescope.decorators.weight"><code class="xref py py-func docutils literal notranslate"><span class="pre">autogradescope.decorators.weight()</span></code></a>,
<a class="reference internal" href="#autogradescope.decorators.timeout" title="autogradescope.decorators.timeout"><code class="xref py py-func docutils literal notranslate"><span class="pre">autogradescope.decorators.timeout()</span></code></a>, and
<a class="reference internal" href="#autogradescope.decorators.visibility" title="autogradescope.decorators.visibility"><code class="xref py py-func docutils literal notranslate"><span class="pre">autogradescope.decorators.visibility()</span></code></a> decorators. These decorators can
be used to override the default settings for individual tests, and can be
combined to set multiple settings at once. For example, the following test is
worth 2 points, has a timeout of 10 seconds, and is hidden from students:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@weight</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nd">@timeout</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nd">@visibility</span><span class="p">(</span><span class="s2">&quot;hidden&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_easy_1</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Doubling 21 makes 42.&quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">pp01</span><span class="o">.</span><span class="n">doubler</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span> <span class="o">==</span> <span class="mi">42</span>
</pre></div>
</div>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h2>
<p>The full example below shows a simple autograder test file with a few tests.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Public autograder tests.&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">autogradescope</span> <span class="kn">import</span> <span class="n">Settings</span>
<span class="kn">from</span> <span class="nn">autogradescope.decorators</span> <span class="kn">import</span> <span class="n">weight</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span> <span class="n">visibility</span>

<span class="c1"># settings =============================================================================</span>

<span class="n">SETTINGS</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>

<span class="c1"># default_visibility -------------------------------------------------------------------</span>
<span class="c1"># This controls the default visibility of the tests. Valid options are:</span>
<span class="c1">#</span>
<span class="c1"># - &quot;hidden&quot;: The test results are never visible to the students.</span>
<span class="c1">#</span>
<span class="c1"># - &quot;visible&quot;: The test results are always visible to the students.</span>
<span class="c1">#</span>
<span class="c1"># - &quot;after_published&quot;: test case will be shown only when the assignment is</span>
<span class="c1">#   explicitly published from the &quot;Review Grades&quot; page.</span>
<span class="c1">#</span>
<span class="c1"># - &quot;after_due_date&quot;: test case will be shown after the assignment&#39;s due date</span>
<span class="c1">#   has passed. If late submission is allowed, then test will be shown only after</span>
<span class="c1">#   the late due date.</span>
<span class="n">SETTINGS</span><span class="o">.</span><span class="n">default_visibility</span> <span class="o">=</span> <span class="s2">&quot;visible&quot;</span>

<span class="c1"># default_weight -----------------------------------------------------------------------</span>
<span class="c1"># The number of points each test is worth by default.</span>
<span class="n">SETTINGS</span><span class="o">.</span><span class="n">default_weight</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># default_timeout ----------------------------------------------------------------------</span>
<span class="c1"># The number of seconds before a test times out and no points are awarded.</span>
<span class="n">SETTINGS</span><span class="o">.</span><span class="n">default_timeout</span> <span class="o">=</span> <span class="mi">60</span>

<span class="c1"># leaderboard --------------------------------------------------------------------------</span>
<span class="c1"># A dictionary mapping leaderboard categories to scores for this submission. If</span>
<span class="c1"># a leaderboard is used, it can be set to an empty dictionary here, and filled in with</span>
<span class="c1"># values in the test functions.</span>
<span class="c1"># SETTINGS.leaderboard = {}</span>

<span class="c1"># tests ================================================================================</span>

<span class="c1"># import the student&#39;s submission</span>
<span class="kn">import</span> <span class="nn">pp01</span>

<span class="k">def</span> <span class="nf">test_for_smoke</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks that the submission runs without error.&quot;&quot;&quot;</span>
    <span class="n">pp01</span><span class="o">.</span><span class="n">doubler</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="nd">@weight</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_easy_1</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Doubling 21 makes 42.&quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">pp01</span><span class="o">.</span><span class="n">doubler</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span> <span class="o">==</span> <span class="mi">42</span>

<span class="nd">@timeout</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_lots_of_doubling</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Doubling 1 million gives a big number.&quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">pp01</span><span class="o">.</span><span class="n">doubler</span><span class="p">(</span><span class="mi">1_000_000</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">1_000_000</span>
</pre></div>
</div>
<p>For a full example of an autograder that can be compiled and uploaded to
Gradescope, see the <cite>example</cite> directory in the <cite>autogradescope</cite> <a class="reference external" href="https://github.com/eldridgejm/autogradescope/tree/main/example">GitHub repository</a>.</p>
</section>
<section id="building">
<h2>Building<a class="headerlink" href="#building" title="Link to this heading"></a></h2>
<p>Running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code> within the autograder directory will simulate running the
autograder against your solution code. This not only ensures that the
autograder is properly configured, but also that the tests pass when run
against the correct solution (as they should).</p>
<p>Running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">autograder</span></code> (or simply <code class="docutils literal notranslate"><span class="pre">make</span></code>) will build the autograder zip
file that you will upload to Gradescope; if the build succeeds, the file will
be located at <code class="docutils literal notranslate"><span class="pre">_build/autograder.zip</span></code>. Note that <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">autograder</span></code> also
runs <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code>; if the tests fail, the autograder will not be built.</p>
<p>Running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code> will remove the <code class="docutils literal notranslate"><span class="pre">_build/</span></code> directory and its contents.</p>
</section>
</section>
<section id="features">
<h1>Features<a class="headerlink" href="#features" title="Link to this heading"></a></h1>
<section id="timeouts">
<h2>Timeouts<a class="headerlink" href="#timeouts" title="Link to this heading"></a></h2>
<p>Gradescope autograders can be configured with a maximum time limit. However, if
a submission takes too long, the autograder is killed and the student loses all
points. To prevent this, you can use the
<a class="reference internal" href="#autogradescope.decorators.timeout" title="autogradescope.decorators.timeout"><code class="xref py py-func docutils literal notranslate"><span class="pre">autogradescope.decorators.timeout()</span></code></a> decorator to set a timeout for
individual tests. If a test takes longer than the specified time, only that
test fails, and the student does not lose points for other tests.</p>
</section>
<section id="leaderboards">
<h2>Leaderboards<a class="headerlink" href="#leaderboards" title="Link to this heading"></a></h2>
<p>Gradescope assignments can be configured to have leaderboards that rank
submissions by performance on a particular metric. To use leaderboards
with <cite>autogradescope</cite>, set the <code class="docutils literal notranslate"><span class="pre">leaderboard</span></code> attribute of the
<code class="docutils literal notranslate"><span class="pre">SETTINGS</span></code> object to a dictionary mapping leaderboard categories to scores.
There are no restrictions on the leaderboard categories you can use. For
example, to create a leaderboard that ranks submissions by accuracy, you could
write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CORRECT_LABELS</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">YOUR_ACCURACY</span> <span class="o">=</span> <span class="p">(</span><span class="n">submission</span><span class="o">.</span><span class="n">predict</span><span class="p">()</span> <span class="o">==</span> <span class="n">CORRECT_LABELS</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">SETTINGS</span><span class="o">.</span><span class="n">leaderboard</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;accuracy&quot;</span><span class="p">:</span> <span class="n">YOUR_ACCURACY</span>
<span class="p">}</span>

<span class="nd">@weight</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_accuracy_above_75</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Accuracy is above 75%.&quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">YOUR_ACCURACY</span> <span class="o">&gt;</span> <span class="mf">0.75</span>
</pre></div>
</div>
</section>
<section id="including-doctests">
<h2>Including doctests<a class="headerlink" href="#including-doctests" title="Link to this heading"></a></h2>
<p>Sometimes you may want to distribute starter code to students that includes
doctests, since doctests can be a useful way to provide examples of how their
code will be called and what it should return. In such cases, you may
want to write an autograder test that checks that the doctests pass (this can
be a useful public test). To do this, you can use <a class="reference internal" href="#autogradescope.doctests.run" title="autogradescope.doctests.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">autogradescope.doctests.run()</span></code></a>.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">autogradescope.doctests</span>

<span class="c1"># import the student&#39;s submission</span>
<span class="kn">import</span> <span class="nn">pp01</span>

<span class="k">def</span> <span class="nf">test_doctests</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check that the doctests pass.&quot;&quot;&quot;</span>
    <span class="n">doctests</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">pp01</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This will run the doctests as they appear in the student’s submission (which
might be different than the doctests in the starter code!). For example, a
student can easily make this test pass by deleting the doctests from the
starter code. Or, this test might fail because the student _added_ more
stringent doctests than the starter code.</p>
</div>
</section>
<section id="extra-credit">
<h2>Extra credit<a class="headerlink" href="#extra-credit" title="Link to this heading"></a></h2>
<p>A test can be marked as extra credit by using the <code class="docutils literal notranslate"><span class="pre">extra_credit</span></code> argument to
the <a class="reference internal" href="#autogradescope.decorators.weight" title="autogradescope.decorators.weight"><code class="xref py py-func docutils literal notranslate"><span class="pre">autogradescope.decorators.weight()</span></code></a> decorator. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@weight</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">extra_credit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test_extra_credit</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This test is extra credit.&quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">pp01</span><span class="o">.</span><span class="n">doubler</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span> <span class="o">==</span> <span class="mi">42</span>
</pre></div>
</div>
<p>Practically, because Gradescope allows configuring an autograder to have a
maximum number of points that is fewer than the sum of the points awarded by
the tests, extra credit can be implemented without this decorator. However,
this decorator changes how the results are displayed to the student. With this
decorator, the test still shows as “green” (i.e., passed) even if the student
does not pass the test. Without this decorator, the test shows as “red” (i.e.,
failed) if the student does not pass the test.</p>
</section>
</section>
<section id="api">
<h1>API<a class="headerlink" href="#api" title="Link to this heading"></a></h1>
<section id="module-0">
<span id="module-autogradescope"></span><h2>Module: <a class="reference internal" href="#module-0" title="autogradescope"><code class="xref py py-mod docutils literal notranslate"><span class="pre">autogradescope</span></code></a><a class="headerlink" href="#module-0" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="autogradescope.Settings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autogradescope.</span></span><span class="sig-name descname"><span class="pre">Settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">default_visibility</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'after_published'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leaderboard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">failure_message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autogradescope/settings.html#Settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autogradescope.Settings" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Stores autograder settings.</p>
<p>A test module should have a single instance of this object, named
<code class="docutils literal notranslate"><span class="pre">SETTINGS</span></code>, that is used to store the settings for the autograder.</p>
<p>This object does error checking on the settings to ensure that they are
valid, and to prevent typos from causing terrible catastrophes that could
result, like students seeing the private tests before the due date.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="autogradescope.Settings.default_visibility">
<span class="sig-name descname"><span class="pre">default_visibility</span></span><a class="headerlink" href="#autogradescope.Settings.default_visibility" title="Link to this definition"></a></dt>
<dd><p>The default visibility of the tests. Valid options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hidden</span></code>: The test results are never visible to the students.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visible</span></code>: The test results are always visible to the students.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">after_published</span></code>: test case will be shown only when the assignment
is explicitly published from the “Review Grades” page. If not provided,
this is the default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">after_due_date</span></code>: test case will be shown after the assignment’s due
date has passed. If late submission is allowed, then test will be
shown only after the late due date.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autogradescope.Settings.default_weight">
<span class="sig-name descname"><span class="pre">default_weight</span></span><a class="headerlink" href="#autogradescope.Settings.default_weight" title="Link to this definition"></a></dt>
<dd><p>The default weight of the tests. Default is 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autogradescope.Settings.default_timeout">
<span class="sig-name descname"><span class="pre">default_timeout</span></span><a class="headerlink" href="#autogradescope.Settings.default_timeout" title="Link to this definition"></a></dt>
<dd><p>The default timeout for each tests. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, no timeout will be
used beyond Gradescope’s own timeout for the autograder process as a whole. Default is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autogradescope.Settings.leaderboard">
<span class="sig-name descname"><span class="pre">leaderboard</span></span><a class="headerlink" href="#autogradescope.Settings.leaderboard" title="Link to this definition"></a></dt>
<dd><p>A dictionary mapping leaderboard categories to scores for this
submission. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, no leaderboard will be used. Default is
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autogradescope.Settings.failure_message">
<span class="sig-name descname"><span class="pre">failure_message</span></span><a class="headerlink" href="#autogradescope.Settings.failure_message" title="Link to this definition"></a></dt>
<dd><p>A function that formats a failure message for a test. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, a
default failure message will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[Callable]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-autogradescope.decorators">
<span id="module-autogradescope-decorators"></span><h2>Module: <a class="reference internal" href="#module-autogradescope.decorators" title="autogradescope.decorators"><code class="xref py py-mod docutils literal notranslate"><span class="pre">autogradescope.decorators</span></code></a><a class="headerlink" href="#module-autogradescope.decorators" title="Link to this heading"></a></h2>
<p>Decorators that change the behavior of tests.</p>
<dl class="py function">
<dt class="sig sig-object py" id="autogradescope.decorators.timeout">
<span class="sig-prename descclassname"><span class="pre">autogradescope.decorators.</span></span><span class="sig-name descname"><span class="pre">timeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autogradescope/decorators.html#timeout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autogradescope.decorators.timeout" title="Link to this definition"></a></dt>
<dd><p>Changes the timeout from the default of 60 seconds.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autogradescope.decorators.visibility">
<span class="sig-prename descclassname"><span class="pre">autogradescope.decorators.</span></span><span class="sig-name descname"><span class="pre">visibility</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autogradescope/decorators.html#visibility"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autogradescope.decorators.visibility" title="Link to this definition"></a></dt>
<dd><p>Changes the visibility from the default of after_published. Validates.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autogradescope.decorators.weight">
<span class="sig-prename descclassname"><span class="pre">autogradescope.decorators.</span></span><span class="sig-name descname"><span class="pre">weight</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_credit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autogradescope/decorators.html#weight"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autogradescope.decorators.weight" title="Link to this definition"></a></dt>
<dd><p>Changes the weight from the default of 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>points</strong> (<em>Number</em>) – The number of points the test is worth.</p></li>
<li><p><strong>extra_credit</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether the test allows extra credit. Default is False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-autogradescope.doctests">
<span id="module-autogradescope-doctests"></span><h2>Module: <a class="reference internal" href="#module-autogradescope.doctests" title="autogradescope.doctests"><code class="xref py py-mod docutils literal notranslate"><span class="pre">autogradescope.doctests</span></code></a><a class="headerlink" href="#module-autogradescope.doctests" title="Link to this heading"></a></h2>
<p>A convenience function for running doctests within autograder tests.</p>
<dl class="py function">
<dt class="sig sig-object py" id="autogradescope.doctests.run">
<span class="sig-prename descclassname"><span class="pre">autogradescope.doctests.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autogradescope/doctests.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#autogradescope.doctests.run" title="Link to this definition"></a></dt>
<dd><p>Runs a module’s doctests.</p>
<p>This can be used in autograder tests to ensure that the doctests are
correct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>module</strong> (<em>module</em>) – The module to run doctests for.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>DoctestError</strong> – If any of the doctests fail.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>To run the doctests for a student’s submission in an auto-grader test:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">autogradescope.doctests</span>

<span class="kn">import</span> <span class="nn">pp01</span>

<span class="k">def</span> <span class="nf">test_doctests</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks that the doctests pass.&quot;&quot;&quot;</span>
    <span class="n">autogradescope</span><span class="o">.</span><span class="n">doctests</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">pp01</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<div class="toctree-wrapper compound">
</div>
</section>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Justin Eldridge.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>